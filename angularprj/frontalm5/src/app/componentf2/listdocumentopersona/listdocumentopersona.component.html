<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-primary m-0">Documentos de la Persona</h2>
    <button class="btn btn-secondary" (click)="volver()">Volver</button>
  </div>

  <!-- Tabla de documentos -->
  <div class="card shadow-lg border-0 rounded-3 mb-4">
    <div class="card-body">
      <table class="table table-hover table-striped align-middle text-center">
        <thead class="table-dark">
          <tr>
            <th>Tipo Documento</th>
            <th>Número</th>
            <th>Opciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let doc of docPersona">
            <td>{{ doc.tipoDocumento.nombre }}</td>
            <td>{{ doc.noDocumento }}</td>
            <td>
              <button class="btn btn-warning btn-sm me-2" (click)="selectDoc(doc)">
                <i class="bi bi-pencil-square"></i> Editar
              </button>
              <!--
              <button class="btn btn-danger btn-sm" (click)="deleteDoc(doc)">
                <i class="bi bi-trash"></i> Borrar
              </button>
              -->
            </td>
          </tr>
        </tbody>
      </table>
      <button class="btn btn-success mt-3" (click)="mostrarAgregar()">Agregar Documento</button>
      <!--
      <button class="btn btn-success mt-3" (click)="resetForm()">Agregar Documento</button>
      -->
    </div>
  </div>

  <!-- Formulario de agregar/editar
  <div class="card shadow-lg border-0 rounded-3" *ngIf="editando || selectedTipoDoc !== null || noDocumento !== ''">
     -->
  <div class="card shadow-lg border-0 rounded-3" *ngIf="mostrarFormulario">
    <div class="card-body">
      <h5>{{ editando ? 'Editar Documento' : 'Agregar Documento' }}</h5>

      <div class="mb-3">
        <label for="tipoDoc" class="form-label">Tipo Documento:</label>
        <select
          id="tipoDoc"
          class="form-select"
          required
          [(ngModel)]="selectedTipoDoc"
          name="tipoDoc"
          (change)="onTipoDocChange()"
        >
          <option value="" disabled selected>Seleccione un tipo</option>
          <option *ngFor="let td of tiposDocumento" [value]="td.idTipoDocumento">
            {{ td.nombre }}
          </option>
        </select>
      </div>

      <div class="mb-3">
        <label for="noDoc" class="form-label">Número Documento:</label>
        <input
          type="text"
          id="noDoc"
          class="form-control"
          [(ngModel)]="noDocumento"
          name="noDoc"
          required
          [attr.maxlength] = "longitudDocumento || null"
          [placeholder]="longitudDocumento ? 'Debe tener ' + longitudDocumento +' digitos' : 'Ingrese el numero'"
        />
      </div>

      <button class="btn btn-primary" (click)="guardarDocumento()">
        {{ editando ? 'Actualizar' : 'Guardar' }}
      </button>
      <button class="btn btn-secondary ms-2" (click)="resetForm()" >
        Cancelar
      </button>
    </div>
  </div>
</div>
