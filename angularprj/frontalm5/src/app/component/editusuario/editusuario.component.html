<div class="container col-md-8">
  <div class="card">
    <div class="card-header">
      <h2>Crear Nuevo Usuario</h2>
    </div>

    <div class="card-body">
      <form #usuarioForm="ngForm" novalidate>
        <!-- ID Usuario -->
        <div class="form-group mb-3">
          <label for="idUsuario">ID de Usuario:</label>
          <input
            [(ngModel)]="usuario.idUsuario"
            type="text"
            name="idUsuario"
            id="idUsuario"
            class="form-control"
            placeholder="Ingrese un ID único"
            required
          />
        </div>

        <!-- Nombre -->
        <div class="form-group mb-3">
          <label for="nombre">Nombre:</label>
          <input
            [(ngModel)]="usuario.nombre"
            type="text"
            name="nombre"
            id="nombre"
            class="form-control"
            placeholder="Ingrese nombre"
            required
          />
        </div>

        <!-- Apellido -->
        <div class="form-group mb-3">
          <label for="apellido">Apellido:</label>
          <input
            [(ngModel)]="usuario.apellido"
            type="text"
            name="apellido"
            id="apellido"
            class="form-control"
            placeholder="Ingrese apellido"
            required
          />
        </div>

        <!-- Fecha Nacimiento -->
        <div class="form-group mb-3">
          <label for="fechaNacimiento">Fecha Nacimiento:</label>
          <input
            [(ngModel)]="usuario.fechaNacimiento"
            name="fechaNacimiento"
            type="date"
            class="form-control"
            required
          />
        </div>

        <!-- Password-->
        <div class="form-group mb-3">
          <label for="password">Contraseña:</label>
          <input
            [(ngModel)]="usuario.password"
            name="password"
            type="password"
            class="form-control"
            required
            (input)="validarPassword(usuario.password)"
          />
          <ul class="text-danger mt-1" *ngIf="passwordValidations.length > 0">
            <li *ngFor="let msg of passwordValidations">{{ msg }}</li>
          </ul>
          <small class="form-text text-muted">
            La contraseña debe cumplir con las reglas de seguridad
          </small>
        </div>


        <!-- Selects -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label>Status Usuario:</label>
            <select
              [(ngModel)]="selectedStatus"
              name="idStatusUsuario"
              class="form-select"
              required
            >
              <option [ngValue]="null">Seleccione status</option>
              <option *ngFor="let st of statusUsuarios" [value]="st.idStatusUsuario">
                {{ st.nombre }}
              </option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label>Género:</label>
            <select
              [(ngModel)]="selectedGenero"
              name="idGenero"
              class="form-select"
              required
            >
              <option [ngValue]="null">Seleccione género</option>
              <option *ngFor="let g of genero" [value]="g.idGenero">
                {{ g.nombre }}
              </option>
            </select>
          </div>
        </div>

        <!-- Correo y Teléfono -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label>Correo Electrónico:</label>
            <input
              [(ngModel)]="usuario.correoElectronico"
              name="correo"
              type="email"
              class="form-control"
              required
            />
          </div>

          <div class="col-md-6 mb-3">
            <label>Teléfono:</label>
            <input
              [(ngModel)]="usuario.telefonoMovil"
              name="telefono"
              class="form-control"
            />
          </div>
        </div>

        <!-- Sucursal y Rol -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label>Sucursal:</label>
            <select
              [(ngModel)]="selectedSucursal"
              name="idSucursal"
              class="form-select"
              required
            >
              <option [ngValue]="null">Seleccione sucursal</option>
              <option *ngFor="let s of sucursal" [value]="s.idSucursal">
                {{ s.nombre }}
              </option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label>Rol:</label>
            <select
              [(ngModel)]="selectedRol"
              name="idRol"
              class="form-select"
              required
            >
              <option [ngValue]="null">Seleccione rol</option>
              <option *ngFor="let r of rol" [value]="r.idRole">
                {{ r.nombre }}
              </option>
            </select>
          </div>
        </div>

        <!-- Botones -->
        <div class="d-flex justify-content-end">
          <button type="button" class="btn btn-secondary me-2" (click)="Cancelar()">
            Cancelar
          </button>
          <button
            type="button"
            class="btn btn-primary"
            (click)="editUser(usuario)"
            [disabled]="!usuarioForm.form.valid"
          >
            Guardar Usuario
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
